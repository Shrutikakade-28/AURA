<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aura - Wellness Chatbot Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #e6f3ff 0%, #f8fafc 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            max-width: 800px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        .header p {
            font-size: 1.125rem;
            opacity: 0.9;
        }

        .chat-container {
            height: 500px;
            overflow-y: auto;
            padding: 2rem;
            background: #f8fafc;
        }

        .message {
            margin-bottom: 1rem;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        .user .avatar {
            background: #667eea;
            color: white;
        }

        .bot .avatar {
            background: #e2e8f0;
            color: #667eea;
        }

        .message-content {
            max-width: 70%;
            padding: 1rem;
            border-radius: 1rem;
            line-height: 1.6;
        }

        .user .message-content {
            background: #667eea;
            color: white;
            border-bottom-right-radius: 0.25rem;
        }

        .bot .message-content {
            background: white;
            color: #1a202c;
            border: 1px solid #e2e8f0;
            border-bottom-left-radius: 0.25rem;
        }

        .input-container {
            padding: 1.5rem;
            background: white;
            border-top: 1px solid #e2e8f0;
            display: flex;
            gap: 1rem;
        }

        .input-field {
            flex: 1;
            padding: 1rem;
            border: 1px solid #e2e8f0;
            border-radius: 1rem;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.2s;
        }

        .input-field:focus {
            border-color: #667eea;
        }

        .send-button {
            background: #667eea;
            color: white;
            border: none;
            border-radius: 1rem;
            padding: 1rem 1.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .send-button:hover {
            background: #5a67d8;
        }

        .send-button:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
        }

        .features {
            padding: 2rem;
            background: white;
        }

        .features h2 {
            text-align: center;
            margin-bottom: 2rem;
            color: #1a202c;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .feature {
            text-align: center;
            padding: 1.5rem;
            border-radius: 1rem;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
        }

        .feature-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .feature h3 {
            color: #1a202c;
            margin-bottom: 0.5rem;
        }

        .feature p {
            color: #718096;
            font-size: 0.875rem;
        }

        .crisis-alert {
            background: #fed7d7;
            border: 2px solid #f56565;
            border-radius: 1rem;
            padding: 1.5rem;
            margin: 1rem 0;
            text-align: center;
        }

        .crisis-alert h3 {
            color: #c53030;
            margin-bottom: 1rem;
        }

        .crisis-alert p {
            color: #742a2a;
            margin-bottom: 1rem;
        }

        .crisis-button {
            background: #f56565;
            color: white;
            border: none;
            border-radius: 0.5rem;
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #718096;
            font-style: italic;
        }

        .typing-dots {
            display: flex;
            gap: 0.25rem;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #cbd5e1;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        @media (max-width: 768px) {
            .container {
                margin: 1rem;
                border-radius: 1rem;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .chat-container {
                height: 400px;
                padding: 1rem;
            }
            
            .message-content {
                max-width: 85%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üíô Aura</h1>
            <p>Your Confidential Wellness Companion</p>
        </div>

        <div class="chat-container" id="chatContainer">
            <div class="message bot">
                <div class="avatar">üíô</div>
                <div class="message-content">
                    Hi there! I'm Aura, your wellness companion. I'm here to listen, support, and help you navigate whatever you're going through. How are you feeling today?
                </div>
            </div>
        </div>

        <div class="input-container">
            <input type="text" class="input-field" id="messageInput" placeholder="Type your message here..." maxlength="500">
            <button class="send-button" id="settingsButton" title="Settings">‚öôÔ∏è</button>
            <button class="send-button" id="sendButton">Send</button>
        </div>

        <div class="features">
            <h2>üåü Features</h2>
            <div class="feature-grid">
                <div class="feature">
                    <div class="feature-icon">üí¨</div>
                    <h3>Empathetic Chat</h3>
                    <p>AI-powered conversations with cultural sensitivity for Indian youth</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">üßò</div>
                    <h3>Wellness Tools</h3>
                    <p>Breathing exercises, mindfulness, and mood check-ins</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">üîí</div>
                    <h3>Privacy First</h3>
                    <p>Anonymous usage with end-to-end encryption</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">üÜò</div>
                    <h3>Crisis Support</h3>
                    <p>Automatic detection with Indian helpline integration</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const chatContainer = document.getElementById('chatContainer');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');

        // Gemini AI integration
        let geminiApiKey = '';
        let conversationHistory = [];

        const crisisKeywords = ['suicide', 'kill myself', 'end it all', 'not worth living', 'harm myself', 'hurt myself', 'self harm', 'cut myself', 'overdose', 'take pills', 'jump off', 'hang myself', 'no point', 'better off dead', 'world without me', 'want to die', 'end my life', 'suicidal'];

        function addMessage(content, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;
            
            const avatar = document.createElement('div');
            avatar.className = 'avatar';
            avatar.textContent = isUser ? 'üë§' : 'üíô';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            messageContent.textContent = content;
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            chatContainer.appendChild(messageDiv);
            
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot';
            typingDiv.id = 'typingIndicator';
            
            const avatar = document.createElement('div');
            avatar.className = 'avatar';
            avatar.textContent = 'üíô';
            
            const typingContent = document.createElement('div');
            typingContent.className = 'message-content typing-indicator';
            typingContent.innerHTML = `
                <span>Aura is typing</span>
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            `;
            
            typingDiv.appendChild(avatar);
            typingDiv.appendChild(typingContent);
            chatContainer.appendChild(typingDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        function checkForCrisis(message) {
            const lowerMessage = message.toLowerCase();
            return crisisKeywords.some(keyword => lowerMessage.includes(keyword));
        }

        function showCrisisAlert() {
            const crisisAlert = document.createElement('div');
            crisisAlert.className = 'crisis-alert';
            crisisAlert.innerHTML = `
                <h3>üö® Crisis Support Available</h3>
                <p>I'm concerned about what you've shared. Your safety is important, and there are people who want to help.</p>
                <a href="tel:1800-599-0019" class="crisis-button">Call Helpline: 1800-599-0019</a>
            `;
            chatContainer.appendChild(crisisAlert);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;

            // Add user message
            addMessage(message, true);
            conversationHistory.push({ role: 'user', content: message });
            messageInput.value = '';

            // Check for crisis keywords
            if (checkForCrisis(message)) {
                setTimeout(() => {
                    removeTypingIndicator();
                    showCrisisAlert();
                }, 1500);
                return;
            }

            // Show typing indicator
            showTypingIndicator();

            try {
                // Get AI response from Gemini
                const response = await getGeminiResponse(message);
                removeTypingIndicator();
                addMessage(response);
                conversationHistory.push({ role: 'assistant', content: response });
            } catch (error) {
                console.error('Error getting AI response:', error);
                removeTypingIndicator();
                addMessage("I apologize, but I'm having trouble responding right now. Please try again in a moment.");
            }
        }

        async function getGeminiResponse(userMessage) {
            if (!geminiApiKey) {
                return "Please provide your Gemini API key to enable AI responses. Click the settings button to add it.";
            }

            const prompt = `You are Aura, a compassionate AI wellness companion designed specifically for Indian youth. You provide empathetic, culturally-aware support for mental health and emotional wellbeing.

Cultural Context:
- You understand the pressures Indian youth face: academic stress, family expectations, social media, career uncertainty
- You're aware of cultural nuances around mental health discussions in Indian families
- You respect traditional values while being progressive about mental health
- You understand the importance of family, community, and academic success in Indian culture
- You're familiar with common stressors like competitive exams, arranged marriage pressures, and social expectations

Guidelines:
- Be warm, non-judgmental, and culturally sensitive
- Use simple, relatable language for young people
- Avoid clinical terminology
- Offer practical, actionable advice
- Acknowledge their feelings without minimizing them
- Suggest appropriate self-help tools when relevant
- Keep responses concise but meaningful (2-3 sentences)
- If they're feeling great, celebrate with them and offer ways to maintain positivity
- If they're struggling, provide gentle support and practical suggestions

User message: "${userMessage}"

Respond as Aura:`;

            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${geminiApiKey}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    contents: [{
                        parts: [{
                            text: prompt
                        }]
                    }],
                    generationConfig: {
                        temperature: 0.7,
                        topK: 40,
                        topP: 0.8,
                        maxOutputTokens: 500,
                    }
                })
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();
            return data.candidates[0].content.parts[0].text;
        }

        // Settings modal
        function showSettingsModal() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1000;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: white;
                    padding: 2rem;
                    border-radius: 1rem;
                    max-width: 500px;
                    width: 90%;
                    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
                ">
                    <h2 style="margin-bottom: 1rem; color: #1a202c;">üîë Gemini API Setup</h2>
                    <p style="margin-bottom: 1rem; color: #718096;">
                        To enable intelligent AI responses, please provide your Gemini API key.
                    </p>
                    <input type="password" id="apiKeyInput" placeholder="Enter your Gemini API key" style="
                        width: 100%;
                        padding: 1rem;
                        border: 1px solid #e2e8f0;
                        border-radius: 0.5rem;
                        margin-bottom: 1rem;
                        font-size: 1rem;
                    ">
                    <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                        <button id="cancelSettings" style="
                            background: #e2e8f0;
                            color: #1a202c;
                            border: none;
                            border-radius: 0.5rem;
                            padding: 0.75rem 1.5rem;
                            cursor: pointer;
                        ">Cancel</button>
                        <button id="saveSettings" style="
                            background: #667eea;
                            color: white;
                            border: none;
                            border-radius: 0.5rem;
                            padding: 0.75rem 1.5rem;
                            cursor: pointer;
                        ">Save</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            const apiKeyInput = modal.querySelector('#apiKeyInput');
            const cancelBtn = modal.querySelector('#cancelSettings');
            const saveBtn = modal.querySelector('#saveSettings');
            
            // Load existing API key
            apiKeyInput.value = geminiApiKey;
            
            cancelBtn.addEventListener('click', () => {
                document.body.removeChild(modal);
            });
            
            saveBtn.addEventListener('click', () => {
                geminiApiKey = apiKeyInput.value.trim();
                localStorage.setItem('geminiApiKey', geminiApiKey);
                document.body.removeChild(modal);
                
                if (geminiApiKey) {
                    addMessage("‚úÖ Gemini AI is now enabled! I can provide intelligent, context-aware responses.", false);
                }
            });
            
            apiKeyInput.focus();
        }

        // Load API key from localStorage
        function loadApiKey() {
            const savedKey = localStorage.getItem('geminiApiKey');
            if (savedKey) {
                geminiApiKey = savedKey;
            }
        }

        // Event listeners
        sendButton.addEventListener('click', sendMessage);
        document.getElementById('settingsButton').addEventListener('click', showSettingsModal);
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Load API key and focus input on load
        loadApiKey();
        messageInput.focus();
    </script>
</body>
</html>
